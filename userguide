User Guide for MAMID
(monitor and manager for in memory databases)



Content:

1. Introduction
2. Overview view
3. Problems view
4. Slaves view
5. Risk Groups view
6. Replica Sets view

---

Introduction:

The web interfaces of mamid gives information about the status of mamid:
 - status of slaves and replica sets
 - occuring problems

It enables the user to configure mamid:
 - create and modify slaves
 - create and modify replica sets
 - assign slaves into risk groups
	
	
---

Overview:

 - General information: The overview shows any problems that recently occurred, as well as the  general status of the slaves.

 - Problems:
        The three most recent problems will appear in the overview. Problems can occur in slaves or replica sets.
         
 - Slave State:
        A pie diagram of the slaves states. Slaves can have one of four states: 
	- Active (green)
	- Maintenance (blue)
	- Disabled (grey)
	- Problematic (red)
---

Problems:

- General information

Problems can occur in slaves and replica sets. Every problem shown will have a link to the affected slave or replica set. 
Problems are ordered chronological.

---

Slaves:

Slaves are ordered by their state.

 - General information:
    Slaves have four parameters and four states:
    Parameters:
       	 1. Hostname: a name to identify the slave
         2. Slave port: The port on the host that should be used by the slave.
         3. Mongod port range: the ports to be used by spawned instances of mongod
         4. Persistent storage: Choose this option if the host has and the slave is meant to use persistent storage
    States:
        1. Active
        	Slaves can be set to active.
                The slave is available to host mongod instances as part of replica sets. Active slaves will be monitored. If a problem occurs in an active slave, it will be set to problematic.
        2. Maintenance
                Slaves can be set to maintenance mode.
                A slave in maintenance mode will not be monitored and no new mongod instances will be spawned. Existing mongods will be left untouched.
		Slaves in maintenance mode can be reconfigured.
        3. Disabled
                Slaves can be set to disabled state.
		Marks the slave as not running any mongod instances. 
        4. Problematic
                If a problem occurs in a slave, it will be set to problematic. This happens automatically.
 - Possible Problems:
 	1. Slave is unreachable: Occurs when a slave does not respond. 
	   Check if a slave instance of mamid is running at the specified port.
	   Check if the associated
 - Create slave:
    1. Use [Create new slave] in the top right corner of the slave view or [New Slave] in the sidebar.
    2. Set the parameters of the slave.
    3. Choose [Apply].
        
        After creation, a slave is in disabled state.
 
 - Change slave state:
    1. Choose the slave to change in the Slaves view. Slaves are sorted by their state.
    2. In [Slave Control], one of three states can be set.
        a. Disabled
        b. Maintenance
        c. Active

 - Modify slave settings:
    1. Choose the slave to change in the Slaves view. Slaves are sorted by their state.
    2. Change the state of the slave to [Maintenance] (s. Change slave state)
    3. In Slave Settings, the parameters of the slave can be modified.
    4. Choose [Apply].

---

Risk Groups:
 - General information:
    Risk groups are sorted by their time of creation.
    They reduce downtimes of replica sets.
    To show the slaves in a risk group, click on the risk groups title.
 - How to choose a risk group: When ever slaves share a common fault source, they should be assigned to different risk groups. If this is not possible, the fault sources most likely to fail should e considered first. Possible fault sources are e.g. slaves running on the same blade or having the same power source. 
   
 - Create Risk Group:
    1. Type in a name for the risk group.
    2. Choose [Create]
    It takes a few seconds until the new risk group is shown.

 - Assign slaves to a Risk group:
    1. Choose a slave from the list of unassigned slaves or another risk group.
    2. In the drop-down menu on the right side of the slaves field, choose the desired risk group.

 - Remove slave from a Risk Group:
    1. Open the Risk Group.
    2. Find the slave to be removed.
    3. In the drop-down menu on the right side of the slaves field, choose [Remove from Risk Group]
 
 - Remove a Risk Group:
    1. Remove all slaves from the risk group
    2. Click on the red bin icon at the right side of the risk groups title field.
    3. In the pop-up window, choose [Remove Risk Group]

---

Replica Sets:

 - General information:
    A Replica set consist of a number of volatile and persistent slaves. Every replica set stores one set of data.    Each replica set hast four parameters.

    Replica set overview:
        The replica set overview shows all replica sets; one list of working sets, one of sets with problems.
        To get more information about each replica set, click on its entry in the list.

    Parameters:
        1. Replica Set name: A name to identify the replica set.
        2. Persistent nodes: The number of persistent nodes in the replica set.
        Needs to be zero or a positive integer.
        3. Volatile nodes: The number of volatile nodes in the replica set.
        Needs to be zero or a positive integer.
        The sum of persistent and volatile nodes needs to be odd.
        4. Sharding configuration server: 
       
 - Possible problems:
    - Degraded Replica Set: Occurs when one or more instances of mongod from the slaves in the replica set are not running.
    Check the status of the assigned slaves.
    - Unsatisfied constraints: Occurs when there are not enough ports to spawn the specified number of mongods for the replica set.
    Check if there are enough free ports in assigned slaves.
    Check if there are disabled slaves assigned to the replica set.
   
 - Create replica set:
    1. Choose [Create new Replica Set] in the top right corner of the Replica Sets view or the shortcut [New Replica Set] in the sidebar
    2. Fill in the risk groups parameters.
    3. Click [Create]
       
 - Modify replica set:
    Only the number of persistent and volatile nodes can be changed.

    1. Choose the replica set from the list in the Replica Sets view.
    2. Find [Replica Set Settings]
    3. Change the number of volatile and persistent nodes.
    They need to be zero or a positive integer.
    The sum of persistent and volatile nodes needs to be odd.
 
 - Remove replica set:
    Attention: Removing a replica set will drop all data stored in it.
    Recovering the data is not possible.
	   
    After removing a replica set, all slaves assigned to it are free to be used by other replica sets.

    1. Choose the replica set from the list in the Replica Sets view.
    2. Click [Remove Replica Set from system]. 
    3. In the pop-up window, choose [Remove Replica Set]

